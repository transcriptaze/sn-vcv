#include <map>

struct IIR {
    const double a[4];
    const double b[5];
};

// 12.5kHz, 4 pole Butterworth LPF
const std::map<int, IIR> COEFFICIENTS_12500Hz = {
    {
        11025,
        IIR{
            .a = {-0.000000, 0.486029, -0.000000, 0.017665},
            .b = {0.093981, 0.375923, 0.563885, 0.375923, 0.093981}
        },
    },
    {
        12000,
        IIR{
            .a = {-0.000000, 0.486029, -0.000000, 0.017665},
            .b = {0.093981, 0.375923, 0.563885, 0.375923, 0.093981}
        },
    },
    {
        22050,
        IIR{
            .a = {-0.000000, 0.486029, -0.000000, 0.017665},
            .b = {0.093981, 0.375923, 0.563885, 0.375923, 0.093981}
        },
    },
    {
        24000,
        IIR{
            .a = {-0.000000, 0.486029, -0.000000, 0.017665},
            .b = {0.093981, 0.375923, 0.563885, 0.375923, 0.093981}
        },
    },
    {
        44100,
        IIR{
            .a = {0.522771, 0.572532, 0.115179, 0.023070},
            .b = {0.139597, 0.558388, 0.837582, 0.558388, 0.139597}
        },
    },
    {
        48000,
        IIR{
            .a = {0.162720, 0.494399, 0.034292, 0.018177},
            .b = {0.106849, 0.427397, 0.641096, 0.427397, 0.106849}
        },
    },
    {
        88200,
        IIR{
            .a = {-1.701848, 1.415432, -0.555482, 0.088803},
            .b = {0.015432, 0.061726, 0.092589, 0.061726, 0.015432}
        },
    },
    {
        96000,
        IIR{
            .a = {-1.885259, 1.630530, -0.667897, 0.109585},
            .b = {0.011685, 0.046740, 0.070109, 0.046740, 0.011685}
        },
    },
    {
        176400,
        IIR{
            .a = {-2.840868, 3.148688, -1.593312, 0.308840},
            .b = {0.001459, 0.005837, 0.008756, 0.005837, 0.001459}
        },
    },
    {
        192000,
        IIR{
            .a = {-2.934464, 3.335403, -1.724001, 0.340343},
            .b = {0.001080, 0.004320, 0.006480, 0.004320, 0.001080}
        },
    },
    {
        352800,
        IIR{
            .a = {-3.418841, 4.419496, -2.556930, 0.558141},
            .b = {0.000117, 0.000466, 0.000700, 0.000466, 0.000117}
        },
    },
    {
        384000,
        IIR{
            .a = {-3.465980, 4.535945, -2.653948, 0.585341},
            .b = {0.000085, 0.000339, 0.000509, 0.000339, 0.000085}
        },
    },
    {
        705600,
        IIR{
            .a = {-3.709207, 5.169158, -3.207302, 0.747485},
            .b = {0.000008, 0.000033, 0.000050, 0.000033, 0.000008}
        },
    },
    {
        768000,
        IIR{
            .a = {-3.732824, 5.233586, -3.266057, 0.765391},
            .b = {0.000006, 0.000024, 0.000036, 0.000024, 0.000006}
        },
    },
    {
        1411200,
        IIR{
            .a = {-3.854577, 5.574210, -3.584254, 0.864629},
            .b = {0.000001, 0.000002, 0.000003, 0.000002, 0.000001}
        },
    },
    {
        1536000,
        IIR{
            .a = {-3.866391, 5.608026, -3.616540, 0.874911},
            .b = {0.000000, 0.000002, 0.000002, 0.000002, 0.000000}
        },
    },
    {
        2822400,
        IIR{
            .a = {-3.927285, 5.784487, -3.787063, 0.929862},
            .b = {0.000000, 0.000000, 0.000000, 0.000000, 0.000000}
        },
    },
    {
        3072000,
        IIR{
            .a = {-3.933193, 5.801801, -3.803980, 0.935373},
            .b = {0.000000, 0.000000, 0.000000, 0.000000, 0.000000}
        },
    },
};

// 16kHz, 4 pole Butterworth LPF
const std::map<int, IIR> COEFFICIENTS_16kHz = {
    {
        11025,
        IIR{
            .a = {0.782095, 0.679979, 0.182676, 0.030119},
            .b = {0.167179, 0.668717, 1.003076, 0.668717, 0.167179}
        },
    },
    {
        12000,
        IIR{
            .a = {0.782095, 0.679979, 0.182676, 0.030119},
            .b = {0.167179, 0.668717, 1.003076, 0.668717, 0.167179}
        },
    },
    {
        22050,
        IIR{
            .a = {0.782095, 0.679979, 0.182676, 0.030119},
            .b = {0.167179, 0.668717, 1.003076, 0.668717, 0.167179}
        },
    },
    {
        24000,
        IIR{
            .a = {0.782095, 0.679979, 0.182676, 0.030119},
            .b = {0.167179, 0.668717, 1.003076, 0.668717, 0.167179}
        },
    },
    {
        44100,
        IIR{
            .a = {1.774009, 1.497258, 0.597776, 0.096508},
            .b = {0.310347, 1.241388, 1.862081, 1.241388, 0.310347}
        },
    },
    {
        48000,
        IIR{
            .a = {1.306605, 1.030454, 0.362369, 0.055764},
            .b = {0.234699, 0.938798, 1.408197, 0.938798, 0.234699}
        },
    },
    {
        88200,
        IIR{
            .a = {-1.074228, 0.852962, -0.274000, 0.042262},
            .b = {0.034187, 0.136749, 0.205124, 0.136749, 0.034187}
        },
    },
    {
        96000,
        IIR{
            .a = {-1.306605, 1.030454, -0.362369, 0.055764},
            .b = {0.026078, 0.104311, 0.156466, 0.104311, 0.026078}
        },
    },
    {
        176400,
        IIR{
            .a = {-2.519465, 2.560837, -1.206235, 0.220129},
            .b = {0.003454, 0.013817, 0.020725, 0.013817, 0.003454}
        },
    },
    {
        192000,
        IIR{
            .a = {-2.638628, 2.769310, -1.339281, 0.249822},
            .b = {0.002576, 0.010306, 0.015459, 0.010306, 0.002576}
        },
    },
    {
        352800,
        IIR{
            .a = {-3.256569, 4.033768, -2.246044, 0.473506},
            .b = {0.000291, 0.001165, 0.001748, 0.001165, 0.000291}
        },
    },
    {
        384000,
        IIR{
            .a = {-3.316808, 4.174246, -2.357403, 0.503375},
            .b = {0.000213, 0.000853, 0.001279, 0.000853, 0.000213}
        },
    },
    {
        705600,
        IIR{
            .a = {-3.627844, 4.951225, -3.011924, 0.688888},
            .b = {0.000022, 0.000086, 0.000129, 0.000086, 0.000022}
        },
    },
    {
        768000,
        IIR{
            .a = {-3.658060, 5.031434, -3.083228, 0.710104},
            .b = {0.000016, 0.000062, 0.000093, 0.000062, 0.000016}
        },
    },
    {
        1411200,
        IIR{
            .a = {-3.813865, 5.458724, -3.474943, 0.830108},
            .b = {0.000001, 0.000006, 0.000009, 0.000006, 0.000001}
        },
    },
    {
        1536000,
        IIR{
            .a = {-3.828986, 5.501430, -3.515194, 0.842767},
            .b = {0.000001, 0.000004, 0.000006, 0.000004, 0.000001}
        },
    },
    {
        2822400,
        IIR{
            .a = {-3.906926, 5.725084, -3.729275, 0.911118},
            .b = {0.000000, 0.000000, 0.000001, 0.000000, 0.000000}
        },
    },
    {
        3072000,
        IIR{
            .a = {-3.914488, 5.747100, -3.750647, 0.918036},
            .b = {0.000000, 0.000000, 0.000000, 0.000000, 0.000000}
        },
    },
};

extern IIR coefficients(const std::map<int, IIR>& table, float fs);
